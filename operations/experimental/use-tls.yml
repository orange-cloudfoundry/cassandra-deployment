---

- path: /instance_groups/name=cassandra-seeds/jobs/name=cassandra/properties?/internode_encryption_mode
  type: replace
  value: &internode_encryption_mode all

- path: /instance_groups/name=cassandra-seeds/jobs/name=cassandra/properties?/client_encryption
  type: replace
  value: &client_encryption
    enabled: true
    require_client_auth: false

- path: /instance_groups/name=cassandra-seeds/jobs/name=cassandra/properties?/cert
  type: replace
  value: ((cassandra_nodes_certificate))

- path: /instance_groups/name=cassandra-seeds/jobs/name=cassandra/properties?/keystore_password
  type: replace
  value: ((cassandra_keystore_password))



- path: /instance_groups/name=cassandra-servers/jobs/name=cassandra/properties?/internode_encryption_mode
  type: replace
  value: *internode_encryption_mode

- path: /instance_groups/name=cassandra-servers/jobs/name=cassandra/properties?/client_encryption
  type: replace
  value: *client_encryption

- path: /instance_groups/name=cassandra-servers/jobs/name=cassandra/properties?/cert
  type: replace
  value: ((cassandra_nodes_certificate))

- path: /instance_groups/name=cassandra-servers/jobs/name=cassandra/properties?/keystore_password
  type: replace
  value: ((cassandra_keystore_password))



- path: /variables?/name=cassandra_keystore_password
  type: replace
  value:
    name: cassandra_keystore_password
    type: password

- path: /variables?/name=cassandraCA
  type: replace
  value:
    name: cassandraCA
    type: certificate
    options:
      is_ca: true
      common_name: cassandraCA

- path: /variables?/name=cassandra_nodes_certificate
  type: replace
  value:
    name: cassandra_nodes_certificate
    type: certificate
    options:
      ca: cassandraCA
      common_name: "*.cassandra-seeds.default.cassandra.bosh"
      alternative_names: 
        - "*.cassandra-servers.default.cassandra.bosh"
      extended_key_usage: [ client_auth, server_auth ]
